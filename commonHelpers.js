import{S as m,o as B}from"./assets/header-be8c3040.js";import{a as E,i as w}from"./assets/vendor-174ee90c.js";const y=document.querySelector(".loader");function q(){y.style.display="flex"}function C(){y.style.display="none"}const A=document.querySelector(".best-books-gallery"),x=E.create({baseURL:"https://books-backend.p.goit.global/books"});async function k(){try{q();const o=await x.get("/top-books");return C(),o.data}catch{w.error({position:"topRight",message:"Sorry, no books were found. Please try again."})}}k();function I({list_name:o,books:e}){return`
    <li class="book-category-item">
      <p class="book-category">${o}</p>
      <ul class="top-books">
        ${e.map(t=>`
              <li class="book-card" data-id="${t._id}">
              <div class="book-card-hover">
                <img class="book-cover" src="${t.book_image}" alt="${t.title}"/>
                <div class="view-more">
                <p class="view-more-text">quick view</p>
                </div>
                </div>
                <div class="book-descr">
                <h2 class="book-name">${t.title}</h2>
                <h3 class="book-author">${t.author}</h3>
                </div>
              </li>
            `).join("")}
      </ul>
      <button class="book-card-btn" type="button" data-category="${o}">see more</button>
    </li>
  `}async function M(){const o=await k();let e="";for(let l of o)e+=I(l);const c=` <h1 class="collection-title">Best Sellers <span>Books</span></h1>${`<ul class="top-books-all">${e}</ul>`}`;A.innerHTML=c}M();document.addEventListener("DOMContentLoaded",function(){const o=document.getElementById("container"),e=document.getElementById("myModal"),t=document.getElementById("shoppingListBtn"),c=document.getElementById("closeModalBtn"),l=document.getElementById("notification"),a=document.querySelector(".modal-content");o.addEventListener("click",function(n){const s=n.target.closest(".book-card");if(s){const L=s.dataset.id;v(L)}}),c.addEventListener("click",function(){u()}),window.addEventListener("click",function(n){n.target===e&&u()}),document.addEventListener("keydown",function(n){n.key==="Escape"&&e.style.display==="block"&&u()}),t.addEventListener("click",function(){d()});function d(){const n=t.dataset.bookId,s=JSON.parse(localStorage.getItem(m))||{};t.textContent==="Add to shopping list"?(i(n,s),h("Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."),b()):(r(n,s),f(),S())}function i(n,s){s[n]=addedBook,localStorage.setItem(m,JSON.stringify(s)),B(),t.textContent="Remove from the shopping list"}function r(n,s){delete s[n],localStorage.setItem(m,JSON.stringify(s)),t.textContent="Add to shopping list",f()}function h(n){l.innerHTML=`<span>${n}</span>`,l.style.display="block"}function f(){l.style.display="none"}function b(){a.classList.add("expanded")}function S(){a.classList.remove("expanded")}function v(n){(JSON.parse(localStorage.getItem("books_for_list"))||{})[n]?t.textContent="Remove from the shopping list":t.textContent="Add to shopping list",T(n),e.style.display="block",document.body.style.overflow="hidden"}function u(){e.style.display="none",document.body.style.overflow="auto"}});function T(o){fetch("https://books-backend.p.goit.global/books/top-books").then(e=>e.json()).then(e=>{for(const t of e){const c=t.books.find(l=>l._id===o);if(c){$(c);return}}console.error("Book not found.")}).catch(e=>console.error("Error fetching data:",e))}function $(o){const e=document.querySelector(".book_name"),t=document.querySelector(".author"),c=document.querySelector(".description"),l=document.querySelector(".img_modal"),a=document.querySelector('.links a[name="Amazon"]'),d=document.querySelector('.links a[name="Apple Books"]');if(e.textContent=o.title,t.textContent=o.author,c.textContent=o.description,l.src=o.book_image,a){const i=o.buy_links.find(r=>r.name==="Amazon");i&&(a.href=i.url)}if(d){const i=o.buy_links.find(r=>r.name==="Apple Books");i&&(d.href=i.url)}}const p=document.querySelector(".scroll-btn"),_=o=>{window.scrollTo({top:o.offsetTop,behavior:"smooth"})},g=()=>{const o=document.querySelector(".collection-title");o?(p.addEventListener("click",()=>{_(o)}),window.addEventListener("scroll",()=>{(window.scrollY||window.pageYOffset)>o.offsetTop?p.classList.add("show-scroll-btn"):p.classList.remove("show-scroll-btn")})):setTimeout(g,100)};g();document.querySelector("#toggle");document.querySelector("body");document.querySelectorAll("p");document.querySelectorAll("h1");document.querySelectorAll("h2");document.querySelectorAll("h3");document.querySelectorAll("h4");document.querySelectorAll("h5");document.querySelectorAll("h6");document.querySelectorAll("a");
//# sourceMappingURL=commonHelpers.js.map
