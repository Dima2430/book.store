import"./assets/header-0053ffc9.js";import{a as S,i as O,S as N}from"./assets/vendor-169f9f98.js";const L=document.querySelector(".loader");function j(){L.style.display="flex"}function z(){L.style.display="none"}const _=document.querySelector(".best-books-gallery"),H=S.create({baseURL:"https://books-backend.p.goit.global/books"});async function B(){try{j();const e=await H.get("/top-books");return z(),e.data}catch{O.error({position:"topRight",message:"Sorry, no books were found. Please try again."})}}B();function R({list_name:e,books:t}){return`
    <li class="book-category-item">
      <p class="book-category">${e}</p>
      <ul class="top-books">
        ${t.map(o=>`
              <li class="book-card" data-id="${o._id}">
              <div class="book-card-hover">
                <img class="book-cover" src="${o.book_image}" alt="${o.title}"/>
                <div class="view-more">
                <p class="view-more-text">quick view</p>
                </div>
                </div>
                <div class="book-descr">
                <h2 class="book-name">${o.title}</h2>
                <h3 class="book-author">${o.author}</h3>
                </div>
              </li>
            `).join("")}
      </ul>
      <button class="book-card-btn" type="button" data-category="${e}">see more</button>
    </li>
  `}async function D(){const e=await B();let t="";for(let s of e)t+=R(s);const n=` <h1 class="collection-title">Best Sellers <span>Books</span></h1>${`<ul class="top-books-all">${t}</ul>`}`;_.innerHTML=n}D();const J=document.querySelector(".signup-btn"),E=document.querySelector(".form-container"),P=document.querySelector(".close-btn");J.addEventListener("click",()=>{E.classList.add("visible")});P.addEventListener("click",()=>{E.classList.remove("visible")});const p="local-storage-books";let l,k=l;document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("container"),t=document.getElementById("myModal"),o=document.getElementById("shoppingListBtn"),n=document.getElementById("closeModalBtn"),s=document.getElementById("notification"),a=document.querySelector(".modal-content");e.addEventListener("click",function(r){const i=r.target.closest(".book-card"),c=r.target.closest(".book-card-category");i?(l=i.dataset.id,k=l,console.log(l),b(l)):c&&(l=c.dataset.id,k=l,console.log(l),b(l))}),n.addEventListener("click",function(){w()}),window.addEventListener("click",function(r){r.target===t&&w()}),o.addEventListener("click",function(){m()});function m(){o.dataset.bookId,o.textContent==="Add to shopping list"?(d(),I("Congratulations! You have added the book to the shopping list. To delete, press the button “Remove from the shopping list”."),A()):($(),M(),g(),o.textContent="Add to shopping list")}async function d(){const r=localStorage.getItem(p);let i;try{i=r?JSON.parse(r):[]}catch(u){console.log("Помилка при парсингу JSON:",u);return}const c={dataId:l};if(i.every(u=>u.dataId!==c.dataId)){i.push(c);const u=JSON.stringify(i);try{localStorage.setItem(p,u)}catch(T){console.log("Помилка при зберіганні даних:",T)}}o.textContent="Remove from the shopping list"}async function g(r){const i=JSON.parse(localStorage.getItem(p))||[],c=i.findIndex(u=>u.dataId===k);c!==-1?(i.splice(c,1),localStorage.setItem(p,JSON.stringify(i)),o.textContent="Add to shopping list"):console.log("Book with dataId:",k,"not found in localStorage")}function I(r){s.innerHTML=`<span>${r}</span>`,s.style.display="block"}function $(){s.style.display="none"}function A(){a.classList.add("expanded")}function M(){a.classList.remove("expanded")}function b(r){W(r),t.style.display="block",document.body.style.overflow="hidden"}function w(){t.style.display="none",document.body.style.overflow="auto"}});function W(e){fetch("https://books-backend.p.goit.global/books/top-books").then(t=>t.json()).then(t=>{for(const o of t){const n=o.books.find(s=>s._id===e);if(n){Y(n);return}}console.error("Book not found.")}).catch(t=>console.error("Error fetching data:",t))}function Y(e){const t=document.querySelector(".book_name"),o=document.querySelector(".author"),n=document.querySelector(".description"),s=document.querySelector(".img_modal"),a=document.querySelector('.links a[name="Amazon"]'),m=document.querySelector('.links a[name="Apple Books"]');if(t.textContent=e.title,o.textContent=e.author,n.textContent=e.description,s.src=e.book_image,a){const d=e.buy_links.find(g=>g.name==="Amazon");d&&(a.href=d.url)}if(m){const d=e.buy_links.find(g=>g.name==="Apple Books");d&&(m.href=d.url)}}setInterval(()=>{console.log(localStorage)},2e3);const y=document.querySelector(".scroll-btn"),F=e=>{window.scrollTo({top:e.offsetTop,behavior:"smooth"})},q=()=>{const e=document.querySelector(".collection-title");e?(y.addEventListener("click",()=>{F(e)}),window.addEventListener("scroll",()=>{(window.scrollY||window.pageYOffset)>e.offsetTop?y.classList.add("show-scroll-btn"):y.classList.remove("show-scroll-btn")})):setTimeout(q,100)};q();const U=[{title:"Save the Children",url:"https://www.savethechildren.net/what-we-do/emergencies/ukraine-crisis",img:"./img/save.png",img2x:"./img/save.png"},{title:"Project HOPE",url:"https://www.projecthope.org/country/ukraine/",img:"./img/hope.png",img2x:"./img/hope.png"},{title:"UNITED24",url:"https://u24.gov.ua/uk",img:"./img/united.png",img2x:"./img/united.png"},{title:"International Medical Corps",url:"https://internationalmedicalcorps.org/country/ukraine/",img:"./img/medical.png",img2x:"./img/medical.png"},{title:"Medicins Sans Frontieres",url:"https://www.msf.org/ukraine",img:"./img/medicins.png",img2x:"./img/medicins.png"},{title:"RAZOM",url:"https://www.razomforukraine.org/",img:"./img/razom.png",img2x:"./img/razom.png"},{title:"Action against hunger",url:"https://www.actionagainsthunger.org/location/europe/ukraine/",img:"./img/action.png",img2x:"./img/action.png"},{title:"World vision",url:"https://www.wvi.org/emergencies/ukraine",img:"./img/world.png",img2x:"./img/world.png"},{title:"Serhiy Prytula Charity Foundation",url:"https://prytulafoundation.org/en",img:"./img/prytula.png",img2x:"./img/prytula.png"}],G=({title:e,url:t,img:o,img2x:n},s)=>`<li class="block-list-item swiper-slide"> 
          <span class="fund-number">${s}</span>
          <a class="block-link" href="${t}" target="_blank">
            <img class="fund-logo" srcset="${o} 1x, ${n} 2x" src="${o}" alt="${e}" loading="lazy" />
          </a>
        </li>`,Z=document.querySelector(".support-list"),K=document.querySelector(".support-button");let v=0,h=!1;const V=e=>String(e).padStart(2,"0"),Q=U.map((e,t)=>(v=V(t+1),G(e,v))).join("");Z.innerHTML=Q;const f=new N(".swiper",{direction:"vertical",spaceBetween:20,slidesPerView:"auto",rewind:!0,speed:500,autoplay:{delay:5e3,disableOnInteraction:!1},navigation:{nextEl:".support-button"}}),X=()=>{const e=f.slides.length-1;window.innerWidth<768?f.slideNext():(f.slideTo(h?0:e),h=!h)};K.addEventListener("click",X);document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".sidebar");window.addEventListener("scroll",function(){window.scrollY>100?e.classList.add("scrolled"):e.classList.remove("scrolled")})});document.querySelector("#toggle");document.querySelector("body");document.querySelectorAll("p");document.querySelectorAll("h1");document.querySelectorAll("h2");document.querySelectorAll("h3");document.querySelectorAll("h4");document.querySelectorAll("h5");document.querySelectorAll("h6");document.querySelectorAll("a");document.querySelectorAll(".book-card-btn");const ee=document.querySelector(".best-books-gallery"),te=document.querySelectorAll(".sidebar-categories-link");te.forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();const o=this.textContent.trim();oe(o)})});async function oe(e){try{const t=await x(e);C(t,e)}catch(t){console.error("Error loading books:",t)}}ee.addEventListener("click",ne);function ne(e){if(e.target.nodeName!=="BUTTON")return;const t=e.target;try{if(t.matches("button[data-category]")){const o=t.dataset.category;x(o).then(n=>{C(n,o)}).catch(n=>{})}}catch(o){console.log(o)}}async function x(e){try{return(await S.get(`https://books-backend.p.goit.global/books/category?category=${e}`)).data}catch(t){console.log(t);return}}function se({_id:e,book_image:t,title:o,author:n}){return`
    <li class="book-card-category" data-id="${e}">
      <div class="book-thumb">
        <img class="book-cover-cat" src="${t}" alt="${o}"/>
        <div class="view-more view-more-cat">
        <p class="view-more-text">quick view</p>
        </div>
        </div>
        <div class="book-descr">
        <h2 class="book-namne-cat">${o}</h2>
        <h3 class="book-author">${n}</h3>
        </div>
      </li>`}function C(e,t){const n=`<ul class="category-books-cat">${e.map(se).join("")}</ul>`,s=`<h2 class="collection-title">${re(t)} <span>${ie(t)}</span></h2> ${n}`,a=document.querySelector(".best-books-gallery");a.innerHTML=s}function re(e){let t=e.split(" ");return t.pop(),t.join(" ")}function ie(e){let t=e.trim().split(" ");return t[t.length-1]}
//# sourceMappingURL=commonHelpers.js.map
