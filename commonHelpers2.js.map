{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shoppingList.js"],"sourcesContent":["\nconst slistGalleryEl = document.querySelector('.slist-card-section');\nconst background = document.querySelector('.slist-demo-thumb');\n// console.log(slistGalleryEl);\n\n\n\nimport { STORAGE_KEY } from \"./local-storage\"          //ключ\n                \n \nfunction loadFromLS(key) {\n  try {\n   \n      const data = localStorage.getItem(key);\n      const result = JSON.parse(data);\n        return result;\n  } catch {console.log('error');\n    showbackground(); }\n         \n};\n\n   \n\nconst array = loadFromLS(STORAGE_KEY);\n\n  \n\nrenderImages(array);     //рендеримо розмітку\n\n  \n\n\nfunction imageTemplate({ id, book_image,title,list_name,description,author,amazonURL,appleURL}) {\n  return `<div class=\"slist-card-list\">\n            <div class=\"slist-card-item\">\n              <button type=\"button\" data-id=${id} class=\"slist-del-btn js-slist-del-btn\">\n              </button>\n              <div class=\"slist-card-picture\">\n                <img src=\"${book_image}\" class=\"slist-book-img\" alt=\"books\" />\n              </div>\n              <div class=\"slist-info-container\">\n                <h3 class=\"slist-book-header\">${title}</h3>\n                <h4 class=\"slist-book-category\">${list_name}</h4>\n                <p class=\"slist-book-description\">${description}</p>\n                <h5 class=\"slist-book-autor\">${author}</h5>\n\n                <div class=\"slist-nav\">\n                  <ul class=\"slist-nav-list\">\n                    <li class=\"slist-nav-item\">\n                      <a href=\"${amazonURL}\" class=\"slist-nav-link\">\n\n                      <img class=\"img-amazone logo\" src=\"./img/amazon.png\" alt=\"app\">\n                     </a>\n\n                    </li>\n\n                    <li class=\"slist-nav-item\">\n                      <a href=\"${appleURL}\" class=\"slist-nav-link\"><img class=\"img-app logo\" src=\"./img/ibook.png\" alt=\"app\"></a>\n                      \n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </div>\n          </div>`};\n\n\n\nfunction imagesTemplate(array) {\n  return array.map(imageTemplate).join('');\n      \n};\n\nfunction renderImages(array) {\n   \n  if (array === null || array === [] || !STORAGE_KEY) {\n    \n    showbackground(); \n  } else {\n   const markup = imagesTemplate(array);\n  slistGalleryEl.innerHTML = markup;\n    slistGalleryEl.addEventListener('click', onBtnClick);\n    } // ставимо слухача на форму\n};\n\n\n\n async function onBtnClick(e) {\n   if (e.target.nodeName === 'BUTTON') {\n    console.log(e.target.dataset.id);\n  \n    let bookId = (e.target.dataset.id);//знаходимо по ід на кнопку повішену\n   \n    const jsonString = localStorage.getItem(STORAGE_KEY);\n    let currentArray = JSON.parse(jsonString);\n    localStorage.removeItem(STORAGE_KEY)\n     currentArray.splice(\n      currentArray.findIndex(item => item.id === bookId),\n      1\n    );\n    console.log(currentArray);\n    if (currentArray.length < 1) {\n      localStorage.removeItem(STORAGE_KEY);\n      slistGalleryEl.innerHTML = \"\";\n      showbackground(); \n    } else {\n    const updatedJsonString = JSON.stringify(currentArray);\n      localStorage.setItem(STORAGE_KEY, updatedJsonString);\n      renderImages(currentArray);\n    };\n        \n      \n  };\n\n\n};\n\nfunction hidebackground() {\n    background.classList.add('is-hidden');\n};\n\n\nfunction showbackground() {\n  background.classList.remove('is-hidden');\n\n};\n\n\n\n\n\n\n\n\n\n//  const addedBook2 = {\n//     id: \"643282b1e85766588626a080\",\n//     book_image: \"https://storage.googleapis.com/du-prd/books/images/9781982185824.jpg\",\n//     author: \"Harlan Coben\",\n//     list_name: \"Audio Fiction\",\n//     description: \"\",\n//     title: \"FIND YOU\",\n//     amazonURL: \"https://www.amazon.com/dp/1538748363?tag=NYTBSREV-20\",\n//     appleURL: \"https://goto.applebooks.apple/9781543661385?at=10lIEQ\",\n//     };\n\n\n\n// function saveToLS(STORAGE_KEY, value) {\n//   const jsonData = JSON.stringify(value);\n//   localStorage.setItem(STORAGE_KEY, jsonData);\n// }; \n\n// function onAddBtnClick() {\n\n    \n//     STORAGE_KEY = addedBook2.id;     // дістаємо id з форми\n//     saveToLS(STORAGE_KEY, addedBook2);\n// };\n\n// saveToLS('643282b1e85766588626a080', addedBook2);\n\n\n"],"names":["slistGalleryEl","background","loadFromLS","key","data","showbackground","array","STORAGE_KEY","renderImages","imageTemplate","id","book_image","title","list_name","description","author","amazonURL","appleURL","imagesTemplate","markup","onBtnClick","e","bookId","jsonString","currentArray","item","updatedJsonString"],"mappings":"gDACA,MAAMA,EAAiB,SAAS,cAAc,qBAAqB,EAC7DC,EAAa,SAAS,cAAc,mBAAmB,EAQ7D,SAASC,EAAWC,EAAK,CACvB,GAAI,CAEA,MAAMC,EAAO,aAAa,QAAQD,CAAG,EAEnC,OADa,KAAK,MAAMC,CAAI,CAEjC,MAAO,CAAC,QAAQ,IAAI,OAAO,EAC1BC,EAAgB,CAAG,CAEvB,CAIA,MAAMC,EAAQJ,EAAWK,CAAW,EAIpCC,EAAaF,CAAK,EAKlB,SAASG,EAAc,CAAE,GAAAC,EAAI,WAAAC,EAAW,MAAAC,EAAM,UAAAC,EAAU,YAAAC,EAAY,OAAAC,EAAO,UAAAC,EAAU,SAAAC,CAAQ,EAAG,CAC9F,MAAO;AAAA;AAAA,8CAEqCP,CAAE;AAAA;AAAA;AAAA,4BAGpBC,CAAU;AAAA;AAAA;AAAA,gDAGUC,CAAK;AAAA,kDACHC,CAAS;AAAA,oDACPC,CAAW;AAAA,+CAChBC,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA,iCAKpBC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAQTC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAOxB,CAIjB,SAASC,EAAeZ,EAAO,CAC7B,OAAOA,EAAM,IAAIG,CAAa,EAAE,KAAK,EAAE,CAEzC,CAEA,SAASD,EAAaF,EAAO,CAE3B,GAAIA,IAAU,MAAQA,IAAU,CAAE,GAAI,CAACC,EAErCF,QACK,CACN,MAAMc,EAASD,EAAeZ,CAAK,EACpCN,EAAe,UAAYmB,EACzBnB,EAAe,iBAAiB,QAASoB,CAAU,CAClD,CACL,CAIC,eAAeA,EAAWC,EAAG,CAC3B,GAAIA,EAAE,OAAO,WAAa,SAAU,CACnC,QAAQ,IAAIA,EAAE,OAAO,QAAQ,EAAE,EAE/B,IAAIC,EAAUD,EAAE,OAAO,QAAQ,GAE/B,MAAME,EAAa,aAAa,QAAQhB,CAAW,EACnD,IAAIiB,EAAe,KAAK,MAAMD,CAAU,EAOxC,GANA,aAAa,WAAWhB,CAAW,EAClCiB,EAAa,OACZA,EAAa,UAAUC,GAAQA,EAAK,KAAOH,CAAM,EACjD,CACN,EACI,QAAQ,IAAIE,CAAY,EACpBA,EAAa,OAAS,EACxB,aAAa,WAAWjB,CAAW,EACnCP,EAAe,UAAY,GAC3BK,QACK,CACP,MAAMqB,EAAoB,KAAK,UAAUF,CAAY,EACnD,aAAa,QAAQjB,EAAamB,CAAiB,EACnDlB,EAAagB,CAAY,CAE/B,CAGA,CAEA,CAOA,SAASnB,GAAiB,CACxBJ,EAAW,UAAU,OAAO,WAAW,CAEzC"}