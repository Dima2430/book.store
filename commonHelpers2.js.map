{"version":3,"file":"commonHelpers2.js","sources":["../src/js/shoppingList.js"],"sourcesContent":["import axios from 'axios';\n\n\n\nconst slistGalleryEl = document.querySelector('.slist-card-section');\nconst background = document.querySelector('.slist-demo-thumb');\n\n\n// import { STORAGE_KEY } from \"./local-storage\"          //ключ\nconst STORAGE_KEY = \"local-storage-books\"; \nlet booksIDarray = [];\n\n\n//  закидаємо до ЛС обєкт \nfunction loadFromLS(key) {\n  try {\n   \n      const data = localStorage.getItem(key);\n      const result = JSON.parse(data);\n      console.log(result);\n      booksIDarray = result.map(item => item.dataId);   \n      console.log(booksIDarray);\n        return booksIDarray;\n  } catch {console.log('error');\n    showbackground(); }\n         \n};\nconst arrOfId = loadFromLS(STORAGE_KEY);\nconsole.log(booksIDarray);\n\n\nrenderImages(arrOfId);     //рендеримо розмітку\n\nasync function renderImages(array) {\n   let booksArr = [];\n  if (array === null || array.length===0 || !STORAGE_KEY) {\n    \n      showbackground(); \n      \n  } else {\n      for (const item of array) {\n          \n          \n          const currentBook = await getbook(item);\n        booksArr.push(currentBook);\n        // console.log(booksArr);\n          // return booksArr;\n           \n      }\n           const markup = imagesTemplate(booksArr);\n            slistGalleryEl.innerHTML = markup;\n            slistGalleryEl.addEventListener('click', onBtnClick);\n    } \n};\n\n\n  \nfunction imageTemplate({ _id, book_image,title,list_name,description,author,amazonURL,appleURL}) {\n  return `<div class=\"slist-card-list\">\n            <li class=\"slist-card-item\">\n              <button type=\"button\" data-id=${_id} class=\"slist-del-btn js-slist-del-btn\">\n              </button>\n              <div class=\"slist-card-picture\">\n                <img src=\"${book_image}\" class=\"slist-book-img\" alt=\"books\" />\n              </div>\n              <div class=\"slist-info-container\">\n                <h3 class=\"slist-book-header\">${title}</h3>\n                <h4 class=\"slist-book-category\">${list_name}</h4>\n                <p class=\"slist-book-description\">${description}</p>\n                <h5 class=\"slist-book-autor\">${author}</h5>\n\n                <div class=\"slist-nav\">\n                  <ul class=\"slist-nav-list\">\n                    <li class=\"slist-nav-item\">\n                      <a href=\"${amazonURL}\" class=\"slist-nav-link\">\n\n                      <img class=\"img-amazone logo\" src=\"./img/amazon.png\" alt=\"app\">\n                     </a>\n\n                    </li>\n\n                    <li class=\"slist-nav-item\">\n                      <a href=\"${appleURL}\" class=\"slist-nav-link\"><img class=\"img-app logo\" src=\"./img/ibook.png\" alt=\"app\"></a>\n                      \n                    </li>\n                  </ul>\n                </div>\n              </div>\n            </li>\n          </div>`};\n\n          function imagesTemplate(array) {\n  return array.map(imageTemplate).join('');\n      \n};\n\n\nfunction onBtnClick(e) {\n  if (e.target.nodeName !== 'BUTTON') return;\n  \n  const liElem = e.target.closest('li');\n  console.log(liElem);\n  const bookId = e.target.dataset.id;\n  console.log(bookId);\n\n  liElem.remove();\n  \n\n  const jsonString = localStorage.getItem(STORAGE_KEY);\n \n  let currentArray = JSON.parse(jsonString);\n \n  console.log(currentArray);\n     let newArrofLS = currentArray.splice(\n      currentArray.findIndex(item => item.dataId === bookId),\n      1\n       );\n        // масив обєктів по ЛС\n  console.log(currentArray);\n   if (currentArray.length === 0) {\n     showbackground(); \n      }\n     const updatedJsonString = JSON.stringify(currentArray);\n  localStorage.setItem(STORAGE_KEY, updatedJsonString);\n   \n}\n\n\nasync function getbook(bookId) {\n    const BASE_URL = `https://books-backend.p.goit.global/books/${bookId}`;\n    \n    try {\n        const res = await axios.get(BASE_URL);\n        return res.data;\n\n   \n    } catch (error) {\n        console.log('Результатів не знайдено.');\n    };\n\n};\n\n\nfunction showbackground() {\n  background.classList.remove('is-hidden');\n\n};\n\n\n\n\n\n\n\n"],"names":["slistGalleryEl","background","STORAGE_KEY","booksIDarray","loadFromLS","key","data","result","item","showbackground","arrOfId","renderImages","array","booksArr","currentBook","getbook","markup","imagesTemplate","onBtnClick","imageTemplate","_id","book_image","title","list_name","description","author","amazonURL","appleURL","e","liElem","bookId","jsonString","currentArray","updatedJsonString","BASE_URL","axios"],"mappings":"qFAIA,MAAMA,EAAiB,SAAS,cAAc,qBAAqB,EAC7DC,EAAa,SAAS,cAAc,mBAAmB,EAIvDC,EAAc,sBACpB,IAAIC,EAAe,CAAA,EAInB,SAASC,EAAWC,EAAK,CACvB,GAAI,CAEA,MAAMC,EAAO,aAAa,QAAQD,CAAG,EAC/BE,EAAS,KAAK,MAAMD,CAAI,EAC9B,eAAQ,IAAIC,CAAM,EAClBJ,EAAeI,EAAO,IAAIC,GAAQA,EAAK,MAAM,EAC7C,QAAQ,IAAIL,CAAY,EACfA,CACZ,MAAO,CAAC,QAAQ,IAAI,OAAO,EAC1BM,EAAgB,CAAG,CAEvB,CACA,MAAMC,EAAUN,EAAWF,CAAW,EACtC,QAAQ,IAAIC,CAAY,EAGxBQ,EAAaD,CAAO,EAEpB,eAAeC,EAAaC,EAAO,CAChC,IAAIC,EAAW,CAAA,EAChB,GAAID,IAAU,MAAQA,EAAM,SAAS,GAAK,CAACV,EAEvCO,QAEG,CACH,UAAWD,KAAQI,EAAO,CAGtB,MAAME,EAAc,MAAMC,EAAQP,CAAI,EACxCK,EAAS,KAAKC,CAAW,CAI1B,CACI,MAAME,EAASC,EAAeJ,CAAQ,EACrCb,EAAe,UAAYgB,EAC3BhB,EAAe,iBAAiB,QAASkB,CAAU,CAC1D,CACL,CAIA,SAASC,EAAc,CAAE,IAAAC,EAAK,WAAAC,EAAW,MAAAC,EAAM,UAAAC,EAAU,YAAAC,EAAY,OAAAC,EAAO,UAAAC,EAAU,SAAAC,CAAQ,EAAG,CAC/F,MAAO;AAAA;AAAA,8CAEqCP,CAAG;AAAA;AAAA;AAAA,4BAGrBC,CAAU;AAAA;AAAA;AAAA,gDAGUC,CAAK;AAAA,kDACHC,CAAS;AAAA,oDACPC,CAAW;AAAA,+CAChBC,CAAM;AAAA;AAAA;AAAA;AAAA;AAAA,iCAKpBC,CAAS;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iCAQTC,CAAQ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAOxB,CAEP,SAASV,EAAeL,EAAO,CACvC,OAAOA,EAAM,IAAIO,CAAa,EAAE,KAAK,EAAE,CAEzC,CAGA,SAASD,EAAWU,EAAG,CACrB,GAAIA,EAAE,OAAO,WAAa,SAAU,OAEpC,MAAMC,EAASD,EAAE,OAAO,QAAQ,IAAI,EACpC,QAAQ,IAAIC,CAAM,EAClB,MAAMC,EAASF,EAAE,OAAO,QAAQ,GAChC,QAAQ,IAAIE,CAAM,EAElBD,EAAO,OAAM,EAGb,MAAME,EAAa,aAAa,QAAQ7B,CAAW,EAEnD,IAAI8B,EAAe,KAAK,MAAMD,CAAU,EAExC,QAAQ,IAAIC,CAAY,EACJA,EAAa,OAC7BA,EAAa,UAAUxB,GAAQA,EAAK,SAAWsB,CAAM,EACrD,CACG,EAEP,QAAQ,IAAIE,CAAY,EACnBA,EAAa,SAAW,GAC1BvB,IAEA,MAAMwB,EAAoB,KAAK,UAAUD,CAAY,EACxD,aAAa,QAAQ9B,EAAa+B,CAAiB,CAErD,CAGA,eAAelB,EAAQe,EAAQ,CAC3B,MAAMI,EAAW,6CAA6CJ,CAAM,GAEpE,GAAI,CAEA,OADY,MAAMK,EAAM,IAAID,CAAQ,GACzB,IAGd,MAAe,CACZ,QAAQ,IAAI,0BAA0B,CAE9C,CACA,CAGA,SAASzB,GAAiB,CACxBR,EAAW,UAAU,OAAO,WAAW,CAEzC"}